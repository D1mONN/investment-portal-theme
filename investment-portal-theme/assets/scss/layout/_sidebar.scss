// FILE: assets/scss/layout/_sidebar.scss

/**
 * Sidebar Layout Styles
 * 
 * This file contains comprehensive styling for sidebar layouts and widgets,
 * providing consistent presentation for supplementary content areas.
 */

// -----------------------------------------------------------------------------
// Sidebar Container
// -----------------------------------------------------------------------------

.site-sidebar {
  font-size: $font-size-sm;
  
  @include media-up(lg) {
    font-size: $font-size-md;
  }
}

.sidebar-inner {
  @include media-up(lg) {
    position: sticky;
    top: $header-height + $spacing-6;
    max-height: calc(100vh - #{$header-height} - #{$spacing-12});
    overflow-y: auto;
    
    // Custom scrollbar
    &::-webkit-scrollbar {
      width: 6px;
    }
    
    &::-webkit-scrollbar-track {
      background: $color-gray-100;
      border-radius: 3px;
    }
    
    &::-webkit-scrollbar-thumb {
      background: $color-gray-400;
      border-radius: 3px;
      
      &:hover {
        background: $color-gray-500;
      }
    }
  }
}

// -----------------------------------------------------------------------------
// Widget Base Styles
// -----------------------------------------------------------------------------

.widget,
.sidebar-widget {
  margin-bottom: $spacing-8;
  padding: $spacing-6;
  background-color: $color-white;
  border: $border-width solid $border-color;
  border-radius: $border-radius-lg;
  
  &:last-child {
    margin-bottom: 0;
  }
  
  // Widget without background
  &.widget-no-bg {
    padding: 0;
    background-color: transparent;
    border: none;
  }
  
  // Widget with shadow
  &.widget-shadow {
    border: none;
    box-shadow: $shadow-md;
  }
}

.widget-title {
  margin-bottom: $spacing-5;
  padding-bottom: $spacing-4;
  font-size: $font-size-lg;
  font-weight: $font-weight-semibold;
  color: $color-text-primary;
  border-bottom: 2px solid $color-primary;
  
  // Icon in title
  svg {
    width: 20px;
    height: 20px;
    margin-right: $spacing-2;
    vertical-align: -0.125em;
    color: $color-primary;
  }
}

// Alternative title styles
.widget-title-simple {
  border-bottom: $border-width solid $border-color;
}

.widget-title-accent {
  position: relative;
  padding-left: $spacing-4;
  border-bottom: none;
  
  &::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 4px;
    height: 24px;
    background-color: $color-primary;
    border-radius: 2px;
  }
}

// -----------------------------------------------------------------------------
// WordPress Default Widgets
// -----------------------------------------------------------------------------

// Search widget
.widget_search {
  .search-form {
    position: relative;
    
    .search-field {
      @include form-control;
      padding-right: $spacing-12;
    }
    
    .search-submit {
      position: absolute;
      top: 0;
      right: 0;
      width: 48px;
      height: 100%;
      padding: 0;
      background-color: transparent;
      border: none;
      color: $color-text-secondary;
      transition: $transition-fast;
      
      &:hover {
        color: $color-primary;
        background-color: rgba($color-primary, 0.05);
      }
      
      .screen-reader-text {
        @include visually-hidden;
      }
    }
  }
}

// Recent posts widget
.widget_recent_entries {
  ul {
    @include reset-list;
  }
  
  li {
    padding: $spacing-3 0;
    border-bottom: $border-width solid $border-color;
    
    &:first-child {
      padding-top: 0;
    }
    
    &:last-child {
      padding-bottom: 0;
      border-bottom: none;
    }
    
    a {
      display: block;
      color: $color-text-primary;
      text-decoration: none;
      font-weight: $font-weight-medium;
      line-height: $line-height-normal;
      transition: $transition-fast;
      
      &:hover {
        color: $color-primary;
      }
    }
  }
  
  .post-date {
    display: block;
    margin-top: $spacing-1;
    font-size: $font-size-xs;
    color: $color-text-muted;
  }
}

// Categories widget
.widget_categories,
.widget_archive {
  ul {
    @include reset-list;
  }
  
  li {
    position: relative;
    padding: $spacing-2 0;
    
    a {
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: $color-text-primary;
      text-decoration: none;
      transition: $transition-fast;
      
      &:hover {
        color: $color-primary;
      }
    }
    
    .count {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 24px;
      height: 24px;
      padding: 0 $spacing-2;
      font-size: $font-size-xs;
      font-weight: $font-weight-medium;
      color: $color-text-muted;
      background-color: $color-gray-100;
      border-radius: $border-radius-full;
    }
    
    // Nested categories
    ul {
      margin-top: $spacing-2;
      margin-left: $spacing-4;
      
      li {
        padding: $spacing-1 0;
        
        &::before {
          content: 'â€”';
          margin-right: $spacing-2;
          color: $color-text-muted;
        }
      }
    }
  }
}

// Tag cloud widget
.widget_tag_cloud {
  .tagcloud {
    display: flex;
    flex-wrap: wrap;
    gap: $spacing-2;
    
    a {
      display: inline-block;
      padding: $spacing-1 $spacing-3;
      font-size: $font-size-sm !important;
      color: $color-text-secondary;
      background-color: $color-gray-100;
      border-radius: $border-radius-full;
      text-decoration: none;
      transition: $transition-fast;
      
      &:hover {
        color: $color-white;
        background-color: $color-primary;
        transform: translateY(-1px);
      }
    }
  }
}

// Text widget
.widget_text {
  .textwidget {
    color: $color-text-secondary;
    line-height: $line-height-relaxed;
    
    p {
      margin-bottom: $spacing-4;
      
      &:last-child {
        margin-bottom: 0;
      }
    }
    
    img {
      margin: $spacing-4 0;
      border-radius: $border-radius;
    }
  }
}

// -----------------------------------------------------------------------------
// Custom Widgets
// -----------------------------------------------------------------------------

// Contact widget (integrated from footer)
.contact-widget {
  .widget-description {
    margin-bottom: $spacing-4;
    color: $color-text-secondary;
  }
  
  .contact-form {
    margin-top: $spacing-5;
  }
}

// Share widget
.share-widget {
  .share-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: $spacing-2;
    
    .share-button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 44px;
      height: 44px;
      color: $color-white;
      border-radius: $border-radius;
      transition: $transition-fast;
      
      &:hover {
        transform: translateY(-2px);
        box-shadow: $shadow-md;
      }
      
      svg {
        width: 20px;
        height: 20px;
      }
      
      &.share-facebook {
        background-color: #1877f2;
      }
      
      &.share-telegram {
        background-color: #0088cc;
      }
      
      &.share-linkedin {
        background-color: #0077b5;
      }
      
      &.share-twitter {
        background-color: #1da1f2;
      }
    }
  }
}

// Download widget
.download-widget {
  .download-list {
    display: flex;
    flex-direction: column;
    gap: $spacing-3;
  }
  
  .download-item {
    display: flex;
    align-items: center;
    gap: $spacing-3;
    padding: $spacing-3;
    color: $color-text-primary;
    background-color: $color-gray-50;
    border-radius: $border-radius;
    text-decoration: none;
    transition: $transition-fast;
    
    &:hover {
      background-color: $color-gray-100;
      transform: translateX(2px);
      
      .download-icon {
        color: $color-primary;
      }
    }
    
    .download-icon {
      flex-shrink: 0;
      width: 20px;
      height: 20px;
      color: $color-text-secondary;
      transition: $transition-fast;
    }
  }
}

// Info widget
.info-widget {
  .contact-info {
    .contact-item {
      display: flex;
      align-items: flex-start;
      gap: $spacing-3;
      margin-bottom: $spacing-3;
      
      &:last-child {
        margin-bottom: 0;
      }
      
      .contact-icon {
        flex-shrink: 0;
        width: 16px;
        height: 16px;
        margin-top: 2px;
        color: $color-primary;
      }
      
      a {
        color: $color-text-primary;
        text-decoration: none;
        
        &:hover {
          color: $color-primary;
          text-decoration: underline;
        }
      }
    }
  }
}

// -----------------------------------------------------------------------------
// Sticky Widget
// -----------------------------------------------------------------------------

.sticky-widget {
  @include media-up(lg) {
    position: sticky;
    top: $header-height + $spacing-6;
  }
}

// -----------------------------------------------------------------------------
// Widget Areas
// -----------------------------------------------------------------------------

// Footer widgets
.footer-widgets {
  padding: $spacing-12 0;
  background-color: rgba($color-black, 0.05);
  border-top: $border-width solid rgba($color-white, 0.1);
  
  .widget {
    background-color: transparent;
    border: none;
    padding: 0;
    
    .widget-title {
      color: $color-white;
      border-bottom-color: rgba($color-white, 0.2);
    }
  }
}

// -----------------------------------------------------------------------------
// Mobile Sidebar
// -----------------------------------------------------------------------------

@include media-down(lg) {
  .mobile-sidebar {
    position: fixed;
    top: 0;
    right: -100%;
    width: 320px;
    max-width: 85vw;
    height: 100vh;
    background-color: $color-white;
    box-shadow: $shadow-xl;
    overflow-y: auto;
    transition: right $transition-base;
    z-index: $z-index-modal;
    
    &.active {
      right: 0;
    }
    
    .sidebar-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: $spacing-4 $spacing-5;
      border-bottom: $border-width solid $border-color;
      
      .sidebar-title {
        font-size: $font-size-lg;
        font-weight: $font-weight-semibold;
      }
      
      .sidebar-close {
        @include reset-button;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: $border-radius;
        transition: $transition-fast;
        
        &:hover {
          background-color: $color-gray-100;
        }
        
        svg {
          width: 20px;
          height: 20px;
        }
      }
    }
    
    .sidebar-content {
      padding: $spacing-5;
    }
  }
}